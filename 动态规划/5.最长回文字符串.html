<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    let s = 'babiaaid'
    let maxleg = 1
    let target = null
    let j = 0
    //------- 暴力解法
    // var longestPalindrome = function (s) {
    //     for (let i = 0; i < s.length; i++) {
    //         console.log('<<', i);
    //         j = i + maxleg
    //         while (j < s.length) {
    //             let Str = s.slice(i, j + 1)
    //             console.log(i, j, '}}', Str);
    //             if (Str === solve(Str)) {
    //                 console.log('>>', j, i, j - i, Str);
    //                 let max = j - i
    //                 if (max > maxleg) {
    //                     maxleg = max
    //                     target = i
    //                 }
    //             }
    //             j++;
    //         }
    //     }
    //     return s.slice(target, target + maxleg + 1)

    //     function solve(Str) {
    //         return Str.split('').reverse().join("")
    //     }
    // };

    //------- 动态规划：
    // var longestPalindrome = function (s) {

    // }
    //中心扩散法

    var longestPalindrome = function (s) {
      if (s && s.length > 0) {
        let start = 0, end = 0;
        for (let i = 0; i < s.length; i++) {
          let len1 = expandCenter(i, i)//奇
          let len2 = expandCenter(i, i + 1)//偶
          let len = Math.max(len1, len2);
          if (len > end - start) {
            start = i - (len - 1) / 2;
            end = i + len / 2;
          }
        }

        return s.slice(start + 1, end + 1);
      } else return ''

      function expandCenter(L, R) {
        while (L > 0 && R < s.length && s[L] === s[R]) {
          L--;
          R++;
        }
        return R - L - 1;
      }
    }

    console.log(longestPalindrome(s));
  </script>
</body>

</html>